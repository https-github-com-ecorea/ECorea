<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.ecorea.dao.CartDao">

	<resultMap type="com.project.ecorea.dto.CartDto$CartProduct" id="productMap">
		<id column="pno" property="pno"/>
		<result column="pname" property="cartpname"/>
		<result column="cartcnt" property="cartcnt"/>
		<result column="price" property="price"/>
		<result column="pthumbnail" property="pthumbnail"/>	
	</resultMap>

	<resultMap type="com.project.ecorea.dto.CartDto$CartList" id="mapForCartList">
		<result column="corp_name" property="corpName"/>
		<result column="cartprice" property="cartprice"/>
		<collection property="cartProduct" javaType="java.util.ArrayList" resultMap="productMap"></collection>		
	</resultMap>

	<select id="findByMemberId" resultMap="mapForCartList">
		select c.pno, c.cartcnt, c.cartprice, p.price, p.pname, p.pthumbnail, e.corp_name 
		from cart c 
    		inner join product p 
        		on(c.pno=p.pno)
    		inner join corp e
        		on(p.corp_id=e.corp_id)
		where c.member_id=#{memberId}
	</select>	
</mapper>


<!--  
	public Cart findByPnoAndMemberId(Integer pno, String memberId);
	
	public List<Cart> findByMemberId(String memberId);
	
	public void save(Cart cart);
	
	public void increase(Cart cart);
	
	public void decrease(Cart cart);
	
	public void delete(List<Integer> pnos, String memberId);
-->